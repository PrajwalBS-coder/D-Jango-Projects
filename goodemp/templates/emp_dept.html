<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
</head>

<body>
    <center>
        {% if data %}
        <h1>Department and Employees</h1>

        <table class="table table-bordered">
            <thead>
                <tr>
                    <th>Department No</th>
                    <th>Department Name</th>
                    <th>Location</th>
                    <th>Employees</th>
                </tr>
            </thead>

            <tbody>
                {% for dept in data %}
                <tr>
                    <!-- Department Data -->
                    <td>{{ dept.deptno }}</td>
                    <td>{{ dept.dname }}</td>
                    <td>{{ dept.loc }}</td>

                    <!-- Nested Employee Table -->
                    <td>
                        {% if dept.emp_set.all %}
                        <table class="table table-striped">
                            <thead>
                                <tr>
                                    <th>Emp No</th>
                                    <th>Emp Name</th>
                                    <th>Job</th>
                                    <th>Hire Date</th>
                                    <th>Salary</th>
                                    <th>Manager</th>
                                    <th>Commission</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for emp in dept.emp_set.all %}
                                <tr>
                                    <td>{{ emp.eno }}</td>
                                    <td>{{ emp.ename }}</td>
                                    <td>{{ emp.job }}</td>
                                    <td>{{ emp.hiredate }}</td>
                                    <td>{{ emp.sal }}</td>
                                    <td>{{ emp.mgr }}</td>
                                    <td>{{ emp.comm }}</td>
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                        {% else %}
                        <p>No Employees</p>
                        {% endif %}
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
        {% else %}
        <h1>No Data Available</h1>
        {% endif %}
    </center>

    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
        integrity="sha384-I7E8VVD/ismYTF4hN
